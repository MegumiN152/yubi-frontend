"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[656],{64934:function(pe,z,r){r.r(z),r.d(z,{default:function(){return n}});var q=r(13769),J=r.n(q),ee=r(97857),c=r.n(ee),re=r(15009),o=r.n(re),te=r(99289),y=r.n(te),C=r(5574),R=r.n(C),j=r(67294),ne=r(39428),I=r(60960),N=r(35653),O=r(17788),Z=r(18922),P=r(2453),x=r(34041),S=r(83062),V=r(83622),w=r(73829),Y=r(1413),k=r(5717),ae=r(91146),$=function(i,e){return j.createElement(ae.Z,(0,Y.Z)((0,Y.Z)({},i),{},{ref:e,icon:k.Z}))},oe=j.forwardRef($),G=oe,ue=r(47389),K=r(82061),se=r(9276),a=r(85893),de=["current","pageSize"],D=I.Z.Text,ie=N.Z.TextArea,W=function(i){var e=i.visible,s=i.chart,T=i.onCancel,d=s?JSON.parse(s.genChart||"{}"):{};return(0,a.jsxs)(O.Z,{open:e,title:"\u56FE\u8868\u9884\u89C8",width:800,footer:null,onCancel:T,children:[(0,a.jsx)("div",{style:{minHeight:"400px"},children:(0,a.jsx)(se.Z,{option:d,style:{height:"400px"}})}),(0,a.jsxs)("div",{style:{marginTop:"20px"},children:[(0,a.jsx)(D,{strong:!0,children:"\u5206\u6790\u76EE\u6807\uFF1A"}),(0,a.jsx)("div",{children:s==null?void 0:s.goal}),(0,a.jsx)(D,{strong:!0,style:{marginTop:"10px",display:"block"},children:"\u5206\u6790\u7ED3\u8BBA\uFF1A"}),(0,a.jsx)("div",{children:(s==null?void 0:s.genResult)||"\u6682\u65E0\u5206\u6790\u7ED3\u8BBA"})]})]})},t=function(i){var e=i.visible,s=i.chart,T=i.onCancel,d=i.onOk,p=Z.Z.useForm(),l=R()(p,1),v=l[0];j.useEffect(function(){s&&v.setFieldsValue({name:s.name,goal:s.goal,chartType:s.chartType})},[s]);var le=function(){var H=y()(o()().mark(function F(){var B;return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,v.validateFields();case 3:return B=g.sent,g.next=6,d(B);case 6:v.resetFields(),g.next=12;break;case 9:g.prev=9,g.t0=g.catch(0),P.ZP.error("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25");case 12:case"end":return g.stop()}},F,null,[[0,9]])}));return function(){return H.apply(this,arguments)}}();return(0,a.jsx)(O.Z,{open:e,title:"\u4FEE\u6539\u56FE\u8868",okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onCancel:T,onOk:le,width:600,children:(0,a.jsxs)(Z.Z,{form:v,layout:"vertical",children:[(0,a.jsx)(Z.Z.Item,{name:"name",label:"\u56FE\u8868\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u8868\u540D\u79F0"}],children:(0,a.jsx)(N.Z,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u8868\u540D\u79F0"})}),(0,a.jsx)(Z.Z.Item,{name:"goal",label:"\u5206\u6790\u76EE\u6807",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u6790\u76EE\u6807"}],children:(0,a.jsx)(ie,{rows:4,placeholder:"\u8BF7\u8F93\u5165\u5206\u6790\u76EE\u6807"})}),(0,a.jsx)(Z.Z.Item,{name:"chartType",label:"\u56FE\u8868\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u8868\u7C7B\u578B"}],children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(x.Z.Option,{value:"line",children:"\u6298\u7EBF\u56FE"}),(0,a.jsx)(x.Z.Option,{value:"bar",children:"\u67F1\u72B6\u56FE"}),(0,a.jsx)(x.Z.Option,{value:"pie",children:"\u997C\u56FE"}),(0,a.jsx)(x.Z.Option,{value:"scatter",children:"\u6563\u70B9\u56FE"})]})})]})})},n=function(){var u=(0,j.useRef)(),i=(0,j.useState)(!1),e=R()(i,2),s=e[0],T=e[1],d=(0,j.useState)(!1),p=R()(d,2),l=p[0],v=p[1],le=(0,j.useState)(),H=R()(le,2),F=H[0],B=H[1],ce=function(m){B(m),T(!0)},g=function(m){B(m),v(!0)},he=function(){var b=y()(o()().mark(function m(_){var E;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(F){f.next=2;break}return f.abrupt("return");case 2:return f.prev=2,f.next=5,(0,w.B9)(c()({id:F.id},_));case 5:P.ZP.success("\u4FEE\u6539\u6210\u529F"),v(!1),(E=u.current)===null||E===void 0||E.reload(),f.next=13;break;case 10:f.prev=10,f.t0=f.catch(2),P.ZP.error("\u4FEE\u6539\u5931\u8D25");case 13:case"end":return f.stop()}},m,null,[[2,10]])}));return function(_){return b.apply(this,arguments)}}(),fe=function(){var b=y()(o()().mark(function m(_){return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:O.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u56FE\u8868\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\u3002",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var f=y()(o()().mark(function L(){var M;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,(0,w.ab)({id:_});case 3:P.ZP.success("\u5220\u9664\u6210\u529F"),(M=u.current)===null||M===void 0||M.reload(),h.next=10;break;case 7:h.prev=7,h.t0=h.catch(0),P.ZP.error("\u5220\u9664\u5931\u8D25");case 10:case"end":return h.stop()}},L,null,[[0,7]])}));function Q(){return f.apply(this,arguments)}return Q}()});case 1:case"end":return U.stop()}},m)}));return function(_){return b.apply(this,arguments)}}(),me=[{title:"\u5E8F\u53F7",dataIndex:"id",valueType:"indexBorder",width:48},{title:"\u56FE\u8868\u540D\u79F0",dataIndex:"name",copyable:!0,ellipsis:!0,tip:"\u540D\u79F0\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u5206\u6790\u76EE\u6807",dataIndex:"goal",ellipsis:!0},{title:"\u56FE\u8868\u7C7B\u578B",dataIndex:"chartType",valueType:"select",valueEnum:{line:{text:"\u6298\u7EBF\u56FE"},bar:{text:"\u67F1\u72B6\u56FE"},pie:{text:"\u997C\u56FE"},scatter:{text:"\u6563\u70B9\u56FE"}}},{title:"\u72B6\u6001",dataIndex:"status",valueEnum:{wait:{text:"\u7B49\u5F85\u751F\u6210",status:"default"},running:{text:"\u751F\u6210\u4E2D",status:"processing"},succeed:{text:"\u5DF2\u751F\u6210",status:"success"},failed:{text:"\u751F\u6210\u5931\u8D25",status:"error"}}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0},{title:"\u521B\u5EFA\u8005",dataIndex:"userId",ellipsis:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(m,_){return[(0,a.jsx)(S.Z,{title:"\u9884\u89C8",children:(0,a.jsx)(V.ZP,{type:"link",icon:(0,a.jsx)(G,{}),onClick:function(){return ce(_)}})}),(0,a.jsx)(S.Z,{title:"\u7F16\u8F91",children:(0,a.jsx)(V.ZP,{type:"link",icon:(0,a.jsx)(ue.Z,{}),onClick:function(){return g(_)}})}),(0,a.jsx)(S.Z,{title:"\u5220\u9664",children:(0,a.jsx)(V.ZP,{type:"link",danger:!0,icon:(0,a.jsx)(K.Z,{}),onClick:function(){return fe(_.id)}})})]}}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ne.ZP,{columns:me,actionRef:u,cardBordered:!0,request:y()(o()().mark(function b(){var m,_,E,U,f,Q,L,M,X,h=arguments;return o()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return m=h.length>0&&h[0]!==void 0?h[0]:{},_=h.length>1?h[1]:void 0,E=h.length>2?h[2]:void 0,U=m.current,f=m.pageSize,Q=J()(m,de),L=Object.keys(_||{})[0],M=(_||{})[L],A.next=8,(0,w.tK)(c()({current:U,pageSize:f,sortField:L,sortOrder:M==="ascend"?"asc":"desc"},Q));case 8:return X=A.sent,A.abrupt("return",{data:X.data.records,success:!0,total:X.data.total});case 10:case"end":return A.stop()}},b)})),columnsState:{persistenceKey:"chart-manage-table",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10,showQuickJumper:!0},dateFormatter:"string",headerTitle:"\u56FE\u8868\u7BA1\u7406"}),(0,a.jsx)(W,{visible:s,chart:F,onCancel:function(){T(!1),B(void 0)}}),(0,a.jsx)(t,{visible:l,chart:F,onCancel:function(){v(!1),B(void 0)},onOk:he})]})}},73829:function(pe,z,r){r.d(z,{B9:function(){return ie},M1:function(){return ne},N2:function(){return Y},Yx:function(){return x},Yy:function(){return ae},ab:function(){return N},cb:function(){return se},tK:function(){return ue}});var q=r(52677),J=r.n(q),ee=r(15009),c=r.n(ee),re=r(97857),o=r.n(re),te=r(99289),y=r.n(te),C=r(76772);function R(t,n){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function t(n,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}function ne(t,n){return I.apply(this,arguments)}function I(){return I=y()(c()().mark(function t(n,u){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.request)("/api/chart/add/team",o()({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),I.apply(this,arguments)}function N(t,n){return O.apply(this,arguments)}function O(){return O=y()(c()().mark(function t(n,u){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.request)("/api/chart/delete",o()({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),O.apply(this,arguments)}function Z(t,n){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function t(n,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function x(t,n,u,i){return S.apply(this,arguments)}function S(){return S=y()(c()().mark(function t(n,u,i,e){var s;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=new FormData,i&&s.append("file",i),Object.keys(u).forEach(function(p){var l=u[p];l!=null&&(J()(l)==="object"&&!(l instanceof File)?l instanceof Array?l.forEach(function(v){return s.append(p,v||"")}):s.append(p,JSON.stringify(l)):s.append(p,l))}),d.abrupt("return",(0,C.request)("/api/chart/gen",o()({method:"POST",params:o()({},n),data:s,requestType:"form"},e||{})));case 4:case"end":return d.stop()}},t)})),S.apply(this,arguments)}function V(t,n,u,i){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function t(n,u,i,e){var s;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=new FormData,i&&s.append("file",i),Object.keys(u).forEach(function(p){var l=u[p];l!=null&&(_typeof(l)==="object"&&!(l instanceof File)?l instanceof Array?l.forEach(function(v){return s.append(p,v||"")}):s.append(p,JSON.stringify(l)):s.append(p,l))}),d.abrupt("return",request("/api/chart/gen/async",_objectSpread({method:"POST",params:_objectSpread({},n),data:s,requestType:"form"},e||{})));case 4:case"end":return d.stop()}},t)})),w.apply(this,arguments)}function Y(t,n,u,i){return k.apply(this,arguments)}function k(){return k=y()(c()().mark(function t(n,u,i,e){var s;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=new FormData,i&&s.append("file",i),Object.keys(u).forEach(function(p){var l=u[p];l!=null&&(J()(l)==="object"&&!(l instanceof File)?l instanceof Array?l.forEach(function(v){return s.append(p,v||"")}):s.append(p,JSON.stringify(l)):s.append(p,l))}),d.abrupt("return",(0,C.request)("/api/chart/gen/async/mq",o()({method:"POST",params:o()({},n),data:s,requestType:"form"},e||{})));case 4:case"end":return d.stop()}},t)})),k.apply(this,arguments)}function ae(t,n){return $.apply(this,arguments)}function $(){return $=y()(c()().mark(function t(n,u){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.request)("/api/chart/gen/retry",o()({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),$.apply(this,arguments)}function oe(t,n){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime().mark(function t(n,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/get",_objectSpread({method:"GET",params:_objectSpread({},n)},u||{})));case 1:case"end":return e.stop()}},t)})),G.apply(this,arguments)}function ue(t,n){return K.apply(this,arguments)}function K(){return K=y()(c()().mark(function t(n,u){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.request)("/api/chart/list/page",o()({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),K.apply(this,arguments)}function se(t,n){return a.apply(this,arguments)}function a(){return a=y()(c()().mark(function t(n,u){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.request)("/api/chart/my/list/page",o()({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),a.apply(this,arguments)}function de(t,n){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function t(n,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/my/search/page",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),D.apply(this,arguments)}function ie(t,n){return W.apply(this,arguments)}function W(){return W=y()(c()().mark(function t(n,u){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.request)("/api/chart/update",o()({method:"POST",headers:{"Content-Type":"application/json"},data:n},u||{})));case 1:case"end":return e.stop()}},t)})),W.apply(this,arguments)}}}]);
